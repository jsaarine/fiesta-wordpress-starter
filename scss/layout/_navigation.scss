// Main nav

.c-navigation {
	@include max($small-max) {
		display: flex;
		justify-content: flex-end;
	}

	& > ul {
		text-align: right;

		// Mobile
		@include max($small-max) {
			position: fixed;
			top: 0;
			right: auto;
			bottom: auto;
			z-index: 1;
			background: #fff;
			width: 100%;
			max-width: 90%;
			height: 100%;
			padding-top: em(120px);
			padding-bottom: em(40px);
			margin-right: 0;
			overflow: auto;
			-webkit-overflow-scrolling: touch;
			visibility: hidden;
			transform: translateX(100%);
			text-align: center;
		}
	}

	li {
		position: relative;

		@include min($medium) {
			display: inline-block;
			margin-bottom: 0;
			padding: 0 1em;
		}

		// Parent (has child pages)
		&.menu-item-has-children {
			& > ul {
				display: none;
				padding: 0;
				background: $c-theme;
				position: absolute;
				left: 50%;
				transform: translateX(-50%);
				text-align: center;
				border-radius: 5px;
				box-shadow: 0 0 15px rgba(0,0,0,.2);

				&:before {
					content: "";
					width: 0; 
					height: 0; 
					border-left: 8px solid transparent;
					border-right: 8px solid transparent;
					border-bottom: 8px solid $c-theme;
					position: absolute;
					left: 50%;
					top: -7px;
					margin-left: -4px;
				}

				@include max($small-max) {
					display: block;	
					height: 0;
					overflow: hidden;
					transition: height .25s ease-out;
				}

				li {
					display: block;
					padding-left: 0;
					padding-right: 0;
					white-space: nowrap;
				}

				a {
					padding: 1em 2em;
				}

				a {
					font-size: em(16px);
					color: #fff;
				}
			}

			&:hover, &.hover {
				@include min($medium) {
					& > ul {
						display: block;
					}
				}
			}
		}

		&.current_page_item {
			a {
				color: $c-theme;
			}
		}
	}

	a {
		display: block;
		padding: 1em 0;
		color: $c-dark;
		text-transform: uppercase;

		@include max($small-max) {
			font-size: em(20px);
			padding: 1em 0;
		}
	}

	// Nav button
	.nav-button {
		position: fixed;
		top: em(10px);
		right: 1.2em;
		cursor: pointer;
		text-align: center;
		border: none;
		background: none;
		width: rem(44px);
		height: rem(44px);
		z-index: 2;
		transition: top .2s ease-out;

		@include min($medium) {
			top: em(25px);
		}

		@include hide($medium);

		.lines {
			display: inline-block;
			position: absolute;
			right: 50%;
			transform: translate(50%, -50%);
		}

		.line {
			display: block;
			position: relative;
			top: 0;
			width: 26px;
			height: 2px;
			margin-bottom: 5px;
			background-color: #000;
			transition: top .2s ease-in-out .2s, width .2s ease-in-out, opacity 0s .2s, transform .2s ease-in-out, background .2s ease-in-out;

			&:nth-of-type(3) {
				margin-bottom: 0;
			}
		}
	}

	// Toggle button
	.toggle {
		position: absolute;
		right: 1em;
		top: .3em;
		width: rem(44px);
		height: rem(44px);
		line-height: rem(44px);
		text-align: center;
		cursor: pointer;
		font-size: em(26px);
		background: none;
		border: none;

		@include hide($medium);

		span:nth-of-type(2) {
			display: none;
		}

		&.m-active {
			span:nth-of-type(1) {
				display: none;
			}

			span:nth-of-type(2) {
				display: block;
			}
		}
	}
}

// Nav open

html.m-nav-open {
	overflow: hidden;

	.c-navigation {
		& > ul {
			transform: none;
			visibility: visible;
		}

		.nav-button {
			.line {
				width: rem(26px);
				background-color: $c-dark;

				&:nth-of-type(1) {
					top: 7px;
					transform: rotate(45deg);
				}
				
				&:nth-of-type(2) {
					opacity: 0;
				}
				
				&:nth-of-type(3) {
					top: -7px;
					transform: rotate(-45deg);
				}
			}
		}
	}

	.c-header {
		.nav-close {
			left: 0;
			opacity: 1;
			visibility: visible;
			transition: opacity .25s linear;
		}

		.nav-button {
			.line {
				transition: top .2s ease-in-out, width .2s ease-in-out .2s, opacity 0s .2s, transform .2s ease-in-out .2s;
			}
		}
	}
}

// Transition
html.m-nav-open-transition {
	.c-navigation {
		& > ul {
			transition: opacity .5s linear, transform .5s cubic-bezier(0.19, 1, 0.22, 1), visibility 0s .5s;
		}
	}

	&.m-nav-open {
		.c-navigation {
			& > ul {
				transition: opacity .5s linear, transform .5s cubic-bezier(0.19, 1, 0.22, 1);
			}
		}		
	}
}
